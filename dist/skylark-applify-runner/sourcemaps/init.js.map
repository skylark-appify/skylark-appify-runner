{"version":3,"sources":["init.js"],"names":["define","eventer","runner","sandbox","init","el","options","window","onload","postMessage","iframe","document","createElement","setAttribute","body","appendChild","src","name","on","handleMessage"],"mappings":";;;;;;;AAAAA,QACE,uBACA,WACA,aACA,SAASC,EAAQC,EAAOC,GACtB,aAyCF,OAAOD,EAAOE,KAnCd,SAAcC,EAAGC,GAGfC,OAAOC,OAAS,WAQd,IAAKD,OAAOE,YAAa,CACvB,IAAIC,EAASC,SAASC,cAAc,UAKpC,OAJAF,EAAOG,aAAa,UAAW,4FAC/BH,EAAOG,aAAa,cAAe,KACnCF,SAASG,KAAKC,YAAYL,QAC1BA,EAAOM,IAAMT,OAAOU,MAWtBd,EAAQC,KAAKC,EAAGC,GAEhBL,EAAQiB,GAAGX,OAAQ,UAAWL,EAAOiB","file":"../init.js","sourcesContent":["define([\r\n  \"skylark-domx-eventer\",\r\n  \"./runner\",\r\n  \"./sandbox\",\r\n],function(eventer,runner,sandbox){\r\n    'use strict';\r\n\r\n\r\n  /** =========================================================================\r\n   * JS Bin Runner\r\n   * ========================================================================== */\r\n  function init(el,options) {\r\n\r\n\r\n    window.onload = function () {\r\n      // from index.js\r\n\r\n      /**\r\n       * Live rendering, basic mode.\r\n       * Fallback - load the bin into a new iframe, and let it keep itself up\r\n       * to date using event stream.\r\n       */\r\n      if (!window.postMessage) {\r\n        var iframe = document.createElement('iframe');\r\n        iframe.setAttribute('sandbox', 'allow-modals allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts');\r\n        iframe.setAttribute('frameBorder', '0');\r\n        document.body.appendChild(iframe);\r\n        iframe.src = window.name;\r\n        return;\r\n      }\r\n\r\n      /**\r\n       * Live rendering, postMessage style.\r\n       */\r\n\r\n      // Set the sandbox target\r\n      ///sandbox.target = document.getElementById('sandbox-wrapper');\r\n      ///sandbox.init(document.getElementById('sandbox-wrapper'),options);\r\n      sandbox.init(el,options);\r\n      // Hook into postMessage\r\n      eventer.on(window, 'message', runner.handleMessage);\r\n\r\n    };\r\n\r\n  }\r\n\r\n  return runner.init = init;\r\n\r\n});\r\n"]}